{"ast":null,"code":"import _slicedToArray from\"/home/johnrijoy/projects/polling-webapp/pollo_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useHistory}from'react-router-dom';import{Alert,Form,Button}from'react-bootstrap';import{Context}from'../context/appContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterForm=function RegisterForm(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),alerts=_useState2[0],setAlerts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var actions=useContext(Context).actions;var history=useHistory();var handleSubmit=function handleSubmit(e){e.preventDefault();actions.register(email,name,password).then(function(){console.log(\"You have been registered\");actions.login(email,password);}).then(function(){props.handleSuccess();// redirect to dashboard\nhistory.push('/dashboard');console.log(\"You have beeen logged in\");}).catch(function(error){console.log(\"Error 3\",error.response.data.msg);setAlerts(error.response.data.msg);});};return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"Name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"Email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"Password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),alerts&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:alerts}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",onClick:function onClick(e){return handleSubmit(e);},children:\"Register\"})]});};export default RegisterForm;","map":{"version":3,"sources":["/home/johnrijoy/projects/polling-webapp/pollo_frontend/src/components/RegisterForm.js"],"names":["React","useState","useContext","useHistory","Alert","Form","Button","Context","RegisterForm","props","alerts","setAlerts","email","setEmail","name","setName","password","setPassword","actions","history","handleSubmit","e","preventDefault","register","then","console","log","login","handleSuccess","push","catch","error","response","data","msg","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport {\n  Alert,\n  Form,\n  Button\n} from 'react-bootstrap';\n\nimport { Context } from '../context/appContext';\n\nconst RegisterForm = (props)=>{\n  const [alerts, setAlerts] = useState(null);\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const actions = useContext(Context).actions;\n  const history = useHistory();\n\n  const handleSubmit = (e)=> {\n    e.preventDefault();\n    actions.register(email, name, password)\n      .then(()=>{\n        console.log(\"You have been registered\");\n        actions.login(email, password)\n      })\n      .then(()=>{\n        props.handleSuccess();\n        // redirect to dashboard\n        history.push('/dashboard');\n        console.log(\"You have beeen logged in\");\n      }\n      ).catch((error)=>{\n        console.log(\"Error 3\", error.response.data.msg);\n        setAlerts(error.response.data.msg);\n      });\n  };\n\n  return (\n  <Form>\n    <Form.Group className=\"mb-3\" controlId=\"Name\">\n      <Form.Label>Name</Form.Label>\n      <Form.Control type=\"text\" placeholder=\"Enter name\" \n        value={name} onChange={e=>setName(e.target.value)}\n      />\n    </Form.Group>\n\n    <Form.Group className=\"mb-3\" controlId=\"Email\">\n      <Form.Label>Email address</Form.Label>\n      <Form.Control type=\"text\" placeholder=\"Enter email\" \n        value={email} onChange={e=>setEmail(e.target.value)}\n      />\n    </Form.Group>\n\n    <Form.Group className=\"mb-3\" controlId=\"Password\">\n      <Form.Label>Password</Form.Label>\n      <Form.Control type=\"password\" placeholder=\"Enter Password\" \n        value = {password} onChange={e=>setPassword(e.target.value)}\n      />\n    </Form.Group>\n\n    { (alerts) &&\n    <Alert variant=\"danger\">\n      {alerts}\n    </Alert>\n    }\n\n    <Button variant=\"primary\" type=\"submit\" \n        onClick = {(e)=> handleSubmit(e)}>\n      Register\n    </Button>\n\n  </Form>\n  );   \n};\n\nexport default RegisterForm;\n"]},"metadata":{},"sourceType":"module"}