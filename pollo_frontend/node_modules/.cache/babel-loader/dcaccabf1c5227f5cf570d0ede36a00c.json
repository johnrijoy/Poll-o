{"ast":null,"code":"import _slicedToArray from\"/home/johnrijoy/projects/polling-webapp/pollo_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useHistory,useLocation}from'react-router-dom';import{Alert,Form,Button}from'react-bootstrap';import{Context}from'../context/appContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),alerts=_useState2[0],setAlerts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var actions=useContext(Context).actions;var history=useHistory();var location=useLocation();var handleSubmit=function handleSubmit(e){e.preventDefault();actions.login(email,password).then(function(){if(props.handleSuccess)props.handleSuccess();else history.goBack();console.log(location.pathname);// redirect to dashboard\n//history.push('/dashboard');\nconsole.log(\"You have beeen logged in\");}).catch(function(error){console.log(\"Error 3\",error.response.data.msg);setAlerts(error.response.data.msg);});};return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"Email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),alerts&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:alerts}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",onClick:function onClick(e){return handleSubmit(e);},children:\"Log In\"})]});};export default LoginForm;","map":{"version":3,"sources":["/home/johnrijoy/projects/polling-webapp/pollo_frontend/src/components/LoginForm.js"],"names":["React","useState","useContext","useHistory","useLocation","Alert","Form","Button","Context","LoginForm","props","alerts","setAlerts","email","setEmail","password","setPassword","actions","history","location","handleSubmit","e","preventDefault","login","then","handleSuccess","goBack","console","log","pathname","catch","error","response","data","msg","target","value"],"mappings":"6KAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,OACEC,KADF,CAEEC,IAFF,CAGEC,MAHF,KAIO,iBAJP,CAMA,OAASC,OAAT,KAAwB,uBAAxB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAS,CACzB,cAA4BT,QAAQ,CAAC,IAAD,CAApC,wCAAOU,MAAP,eAAeC,SAAf,eACA,eAA0BX,QAAQ,CAAC,EAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,CAACM,OAAD,CAAV,CAAoBS,OAApC,CACA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CACA,GAAMgB,CAAAA,QAAQ,CAAIf,WAAW,EAA7B,CAEA,GAAMgB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAM,CACzBA,CAAC,CAACC,cAAF,GACAL,OAAO,CAACM,KAAR,CAAcV,KAAd,CAAqBE,QAArB,EACGS,IADH,CACQ,UAAI,CACR,GAAId,KAAK,CAACe,aAAV,CACCf,KAAK,CAACe,aAAN,EAAD,CADA,IAGGP,CAAAA,OAAO,CAACQ,MAAR,EAAD,CACFC,OAAO,CAACC,GAAR,CAAYT,QAAQ,CAACU,QAArB,EACA;AACA;AACAF,OAAO,CAACC,GAAR,CAAY,0BAAZ,EACD,CAVH,EAWIE,KAXJ,CAWU,SAACC,KAAD,CAAS,CACfJ,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBG,KAAK,CAACC,QAAN,CAAeC,IAAf,CAAoBC,GAA3C,EACAtB,SAAS,CAACmB,KAAK,CAACC,QAAN,CAAeC,IAAf,CAAoBC,GAArB,CAAT,CAED,CAfH,EAgBD,CAlBD,CAoBA,mBACA,MAAC,IAAD,yBACE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,CAA6B,SAAS,CAAC,OAAvC,wBACE,KAAC,IAAD,CAAM,KAAN,4BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,WAAW,CAAC,aAAtC,CACE,KAAK,CAAErB,KADT,CACgB,QAAQ,CAAE,kBAAAQ,CAAC,QAAEP,CAAAA,QAAQ,CAACO,CAAC,CAACc,MAAF,CAASC,KAAV,CAAV,EAD3B,EAFF,GADF,cAQE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,CAA6B,SAAS,CAAC,mBAAvC,wBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CAA8B,WAAW,CAAC,UAA1C,CACE,KAAK,CAAIrB,QADX,CACqB,QAAQ,CAAE,kBAAAM,CAAC,QAAEL,CAAAA,WAAW,CAACK,CAAC,CAACc,MAAF,CAASC,KAAV,CAAb,EADhC,EAFF,GARF,CAeKzB,MAAD,eACF,KAAC,KAAD,EAAO,OAAO,CAAC,QAAf,UACGA,MADH,EAhBF,cAqBE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CACI,OAAO,CAAI,iBAACU,CAAD,QAAMD,CAAAA,YAAY,CAACC,CAAD,CAAlB,EADf,oBArBF,GADA,CA6BD,CA1DD,CA4DA,cAAeZ,CAAAA,SAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useHistory, useLocation } from 'react-router-dom';\nimport {\n  Alert,\n  Form,\n  Button\n} from 'react-bootstrap';\n\nimport { Context } from '../context/appContext';\n\nconst LoginForm = (props)=>{\n  const [alerts, setAlerts] = useState(null);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const actions = useContext(Context).actions;\n  const history = useHistory();\n  const location  = useLocation();\n\n  const handleSubmit = (e)=> {\n    e.preventDefault();\n    actions.login(email, password)\n      .then(()=>{\n        if (props.handleSuccess)\n        (props.handleSuccess())\n        else\n          (history.goBack())\n        console.log(location.pathname);\n        // redirect to dashboard\n        //history.push('/dashboard');\n        console.log(\"You have beeen logged in\");\n      }\n      ).catch((error)=>{\n        console.log(\"Error 3\", error.response.data.msg);\n        setAlerts(error.response.data.msg);\n\n      });\n  };\n\n  return (\n  <Form>\n    <Form.Group className=\"mb-3\" controlId=\"Email\">\n      <Form.Label>Email address</Form.Label>\n      <Form.Control type=\"text\" placeholder=\"Enter email\" \n        value={email} onChange={e=>setEmail(e.target.value)}\n      />\n    </Form.Group>\n\n    <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n      <Form.Label>Password</Form.Label>\n      <Form.Control type=\"password\" placeholder=\"Password\" \n        value = {password} onChange={e=>setPassword(e.target.value)}\n      />\n    </Form.Group>\n\n    { (alerts) &&\n    <Alert variant=\"danger\">\n      {alerts}\n    </Alert>\n    }\n\n    <Button variant=\"primary\" type=\"submit\" \n        onClick = {(e)=> handleSubmit(e)}>\n      Log In\n    </Button>\n\n  </Form>\n  );   \n};\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}